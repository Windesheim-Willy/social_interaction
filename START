#!/bin/bash
cd src

source /opt/ros/kinetic/setup.bash
export ROS_PACKAGE_PATH="$(pwd)/../:$ROS_PACKAGE_PATH"

case "$1" in
start)
  rosrun social_interaction start.sh  &>/dev/null &

  while ! echo exit | nc localhost 3000; do sleep 10; done
  sudo -u pi DISPLAY=:0 chromium-browser http://localhost:3000 -kiosk &>/dev/null &
  ;;
stop)
  rosnode kill -a
  killall node
  killall chromium-browse
  ;;
restart)
  $0 stop
  $0 start
  ;;
*)
  echo "Usage: $0 {start|stop|restart}"
esac

exit 0
